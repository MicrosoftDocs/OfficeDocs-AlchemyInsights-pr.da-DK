---
title: Problemer med tokens
ms.author: v-smandalika
author: v-smandalika
manager: dansimp
ms.date: 01/15/2021
ms.audience: Admin
ms.topic: article
ms.service: o365-administration
ROBOTS: NOINDEX, NOFOLLOW
localization_priority: Priority
ms.collection: Adm_O365
ms.custom:
- "7774"
- "9004351"
ms.openlocfilehash: 14a9681c08920094813497e7a75eb87bb0733cbc
ms.sourcegitcommit: e378232f4c9ef4e962208100db752221e7bd2dd6
ms.translationtype: MT
ms.contentlocale: da-DK
ms.lasthandoff: 01/20/2021
ms.locfileid: "49916737"
---
# <a name="issues-with-tokens"></a><span data-ttu-id="5cea8-102">Problemer med tokens</span><span class="sxs-lookup"><span data-stu-id="5cea8-102">Issues with tokens</span></span>

<span data-ttu-id="5cea8-103">Hvis du vil administrere problemer, der er relateret til tokens, kan du udføre følgende trin:</span><span class="sxs-lookup"><span data-stu-id="5cea8-103">To manage issues related to tokens, you can perform the following steps:</span></span>

1. <span data-ttu-id="5cea8-104">Du kan angive levetiden for en Access-, ID-eller SAML-token, der er udstedt af Microsoft Identity platform.</span><span class="sxs-lookup"><span data-stu-id="5cea8-104">You can specify the lifetime of an access, ID, or SAML token issued by Microsoft identity platform.</span></span> <span data-ttu-id="5cea8-105">Du kan angive levetiden for tokens for alle apps i organisationen, for et program med flere arkitekturer (flere virksomheder) eller for en bestemt tjeneste Principal i organisationen.</span><span class="sxs-lookup"><span data-stu-id="5cea8-105">You can set token lifetimes for all apps in your organization, for a multi-tenant (multi-organization) application, or for a specific service principal in your organization.</span></span> <span data-ttu-id="5cea8-106">Hvis du vil have mere at vide, skal du se [levetiden for konfigurerbare tokens i Microsoft Identity platform (Preview)](https://docs.microsoft.com/azure/active-directory/develop/active-directory-configurable-token-lifetimes).</span><span class="sxs-lookup"><span data-stu-id="5cea8-106">For more information, see [Configurable token lifetimes in Microsoft identity platform (preview)](https://docs.microsoft.com/azure/active-directory/develop/active-directory-configurable-token-lifetimes).</span></span>
2. <span data-ttu-id="5cea8-107">Access-tokens gør det muligt for klienter at ringe til beskyttede API'er på internettet og bruges af webapi'erne til at udføre godkendelse og godkendelse.</span><span class="sxs-lookup"><span data-stu-id="5cea8-107">Access tokens enable clients to securely call protected web APIs, and are used by web APIs to perform authentication and authorization.</span></span> <span data-ttu-id="5cea8-108">Som det er en OAuth-specifikation, er Access-tokens ugennemsigtige strenge uden et angivet format – visse identitetsudbydere (IDPs) bruger GUID'ER, andre bruger krypterede blob.</span><span class="sxs-lookup"><span data-stu-id="5cea8-108">As per the OAuth specification, access tokens are opaque strings without a set format - some identity providers (IDPs) use GUIDs, others use encrypted blobs.</span></span> <span data-ttu-id="5cea8-109">Microsoft Identity platform bruger en række forskellige Access-tokens, afhængigt af konfigurationen af API'ET, der accepterer tokenet.</span><span class="sxs-lookup"><span data-stu-id="5cea8-109">The Microsoft identity platform uses a variety of access token formats, depending on the configuration of the API that accepts the token.</span></span> <span data-ttu-id="5cea8-110">Du kan få mere at vide om, hvordan din API kan validere og bruge kravene i et adgangstoken, under [adgangs tokens til Microsoft Identity platform](https://docs.microsoft.com/azure/active-directory/develop/userinfo#calling-the-userinfo-endpoint).</span><span class="sxs-lookup"><span data-stu-id="5cea8-110">To learn how your API can validate and use the claims inside an access token, see [Microsoft identity platform access tokens](https://docs.microsoft.com/azure/active-directory/develop/userinfo#calling-the-userinfo-endpoint).</span></span>
3. <span data-ttu-id="5cea8-111">Microsoft-godkendelses biblioteket (MSAL) understøtter flere godkendelses strømme til brug i forskellige programscenarier.</span><span class="sxs-lookup"><span data-stu-id="5cea8-111">The Microsoft Authentication Library (MSAL) supports several authentication flows for use in different application scenarios.</span></span> <span data-ttu-id="5cea8-112">Du kan få mere at vide under [godkendelses strømme](https://docs.microsoft.com/azure/active-directory/develop/msal-authentication-flows#how-each-flow-emits-tokens-and-codes).</span><span class="sxs-lookup"><span data-stu-id="5cea8-112">For more information, see [Authentication flows](https://docs.microsoft.com/azure/active-directory/develop/msal-authentication-flows#how-each-flow-emits-tokens-and-codes).</span></span>
4. <span data-ttu-id="5cea8-113">OAuth 2,0-godkendelseskode-Grant kan bruges i apps, der er installeret på en enhed for at få adgang til beskyttede ressourcer, f. eks. webapi'er.</span><span class="sxs-lookup"><span data-stu-id="5cea8-113">The OAuth 2.0 authorization code grant can be used in apps that are installed on a device to gain access to protected resources, such as web APIs.</span></span> <span data-ttu-id="5cea8-114">Ved hjælp af Microsoft Identity platform implementation of OAuth 2,0, kan du tilføje logon-og API-adgang til dine mobile-og skrivebordsprogrammer.</span><span class="sxs-lookup"><span data-stu-id="5cea8-114">Using the Microsoft identity platform implementation of OAuth 2.0, you can add sign-in and API access to your mobile and desktop apps.</span></span> <span data-ttu-id="5cea8-115">Se [Microsoft Identity platform og OAuth 2,0 Authorization-kode flow](https://docs.microsoft.com/azure/active-directory/develop/v2-oauth2-auth-code-flow#refresh-the-access-token) for at finde ud af, hvordan du bruger programmet direkte mod protokollen i dit program, ved hjælp af et hvilket som helst sprog.</span><span class="sxs-lookup"><span data-stu-id="5cea8-115">See [Microsoft identity platform and OAuth 2.0 authorization code flow](https://docs.microsoft.com/azure/active-directory/develop/v2-oauth2-auth-code-flow#refresh-the-access-token) for how to program directly against the protocol in your application, using any language.</span></span>
5. <span data-ttu-id="5cea8-116">OpenID Connect (OIDC) er en godkendelsesprotokol, der er bygget på OAuth 2,0, som du kan bruge til at logge på et sikkert program for en bruger.</span><span class="sxs-lookup"><span data-stu-id="5cea8-116">OpenID Connect (OIDC) is an authentication protocol built on OAuth 2.0 that you can use to securely sign in a user to an application.</span></span> <span data-ttu-id="5cea8-117">Når du bruger Microsoft Identity platform-slutpunktets implementering af OpenID Connect, kan du tilføje logon-og API-adgang til dine apps.</span><span class="sxs-lookup"><span data-stu-id="5cea8-117">When you use the Microsoft identity platform endpoint's implementation of OpenID Connect, you can add sign-in and API access to your apps.</span></span> <span data-ttu-id="5cea8-118">[Microsoft Identity platform og OpenID Connect Protocol](https://docs.microsoft.com/azure/active-directory/develop/v2-protocols-oidc#send-the-sign-in-request) viser, hvordan du gør dette uafhængigt af sprog og beskriver, hvordan du sender og modtager http-meddelelser uden at bruge Microsoft open-source-biblioteker.</span><span class="sxs-lookup"><span data-stu-id="5cea8-118">[Microsoft identity platform and OpenID Connect protocol](https://docs.microsoft.com/azure/active-directory/develop/v2-protocols-oidc#send-the-sign-in-request) shows how to do this independent of language and describes how to send and receive HTTP messages without using any Microsoft open-source libraries.</span></span>
    - <span data-ttu-id="5cea8-119">UserInfo-slutpunktet er en del af OIDC-standarden, der er beregnet til at returnere krav om brugeren, der er godkendt.</span><span class="sxs-lookup"><span data-stu-id="5cea8-119">The UserInfo endpoint is part of the OIDC standard, designed to return claims about the user that authenticated.</span></span> <span data-ttu-id="5cea8-120">Du kan finde flere oplysninger i [Microsoft Identity platform UserInfo Endpoint](https://docs.microsoft.com/azure/active-directory/develop/userinfo#consider-use-an-id-token-instead).</span><span class="sxs-lookup"><span data-stu-id="5cea8-120">For more information, see [Microsoft identity platform UserInfo endpoint](https://docs.microsoft.com/azure/active-directory/develop/userinfo#consider-use-an-id-token-instead).</span></span>
    - <span data-ttu-id="5cea8-121">Når du [ringer til en webapi i en Web App ved hjælp af Azure ad og OpenID Connect](https://docs.microsoft.com/samples/azure-samples/active-directory-dotnet-webapp-webapi-openidconnect/active-directory-dotnet-webapp-webapi-openidconnect/) -eksemplet, viser det, hvordan du opretter et MVC-webprogram, der bruger Azure ad til logon ved hjælp af protokollen OpenID Connect, og derefter kalder en webapi under den identitet, der er logget på, ved hjælp af tokens, der er opnået via OAuth 2,0.</span><span class="sxs-lookup"><span data-stu-id="5cea8-121">The [Calling a web API in a web app using Azure AD and OpenID Connect](https://docs.microsoft.com/samples/azure-samples/active-directory-dotnet-webapp-webapi-openidconnect/active-directory-dotnet-webapp-webapi-openidconnect/) sample shows how to build an MVC web application that uses Azure AD for sign-in using the OpenID Connect protocol, and then call a web API under the signed-in user's identity using tokens obtained via OAuth 2.0.</span></span> <span data-ttu-id="5cea8-122">I dette eksempel bruges OpenID Connect ASP .net OWIN-middleware and ADAL .net.</span><span class="sxs-lookup"><span data-stu-id="5cea8-122">This sample uses the OpenID Connect ASP .Net OWIN middleware and ADAL .Net.</span></span>
6. <span data-ttu-id="5cea8-123">[Konfigurere et program for at få vist en webapi](https://docs.microsoft.com/azure/active-directory/develop/quickstart-configure-app-expose-web-apis) -i denne hurtigstarter skal du registrere et webapi med Microsoft Identity platform og vise det til klientprogrammer ved at tilføje et eksempelområde.</span><span class="sxs-lookup"><span data-stu-id="5cea8-123">[Configure an application to expose a web API](https://docs.microsoft.com/azure/active-directory/develop/quickstart-configure-app-expose-web-apis) - In this quickstart, you register a web API with the Microsoft identity platform and expose it to client apps by adding an example scope.</span></span> <span data-ttu-id="5cea8-124">Ved at registrere dit Web-API og afsløre det via omfang, kan du give tilladelses baseret adgang til ressourcerne til autoriserede brugere og klientprogrammer, der har adgang til din API.</span><span class="sxs-lookup"><span data-stu-id="5cea8-124">By registering your web API and exposing it through scopes, you can provide permissions-based access to its resources to authorized users and client apps that access your API.</span></span>
7. <span data-ttu-id="5cea8-125">I Azure Active Directory B2C (Azure AD B2C) er flowet for ressource ejeradgangskoden (ROPC) et OAuth-standard flow for standardgodkendelse.</span><span class="sxs-lookup"><span data-stu-id="5cea8-125">In Azure Active Directory B2C (Azure AD B2C), the resource owner password credentials (ROPC) flow is an OAuth standard authentication flow.</span></span> <span data-ttu-id="5cea8-126">I dette flow udveksler et program, også kaldet den afhængige part, nogle gyldige legitimationsoplysninger for tokens.</span><span class="sxs-lookup"><span data-stu-id="5cea8-126">In this flow, an application, also known as the relying party, exchanges valid credentials for tokens.</span></span> <span data-ttu-id="5cea8-127">Legitimationsoplysningerne omfatter et bruger-ID og en adgangskode.</span><span class="sxs-lookup"><span data-stu-id="5cea8-127">The credentials include a user ID and password.</span></span> <span data-ttu-id="5cea8-128">De tokens, der returneres, er et ID-token, et adgangstoken og et opdaterings token.</span><span class="sxs-lookup"><span data-stu-id="5cea8-128">The tokens returned are an ID token, access token, and a refresh token.</span></span> <span data-ttu-id="5cea8-129">Hvis du vil have mere at vide, skal du se [konfigurere en adgangskode for legitimationsoplysninger for ressource ejer i Azure Active Directory B2C](https://docs.microsoft.com/azure/active-directory-b2c/add-ropc-policy?tabs=app-reg-ga&pivots=b2c-user-flow).</span><span class="sxs-lookup"><span data-stu-id="5cea8-129">For more information, see [Set up a resource owner password credentials flow in Azure Active Directory B2C](https://docs.microsoft.com/azure/active-directory-b2c/add-ropc-policy?tabs=app-reg-ga&pivots=b2c-user-flow).</span></span> 

